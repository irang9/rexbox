@charset "utf-8";
@use 'sass:map';
@use 'sass:color';
@use 'sass:math';
@use '../variables' as *;
@use '../theme' as *;

// ============================================
// Color Utility Classes
// ============================================
// Bootstrap 스타일을 참고하여 자주 사용하는 텍스트/배경 유틸리티를 제공합니다.
// theme/_index.scss에서 정의된 semantic 색상과 variables/_colors.scss의 기본 팔레트를 활용합니다.

@function rexbox-relative-luminance($c) {
    $r: math.div(color.channel($c, "red", $space: rgb), 255);
    $g: math.div(color.channel($c, "green", $space: rgb), 255);
    $b: math.div(color.channel($c, "blue", $space: rgb), 255);

    @each $channel in (r, g, b) {
        $value: if($channel ==r, $r, if($channel ==g, $g, $b));

        @if $value <=0.03928 {
            $value: math.div($value, 12.92);
        }

        @else {
            $value: math.pow(math.div($value + 0.055, 1.055), 2.4);
        }

        @if $channel ==r {
            $r: $value;
        }

        @else if $channel ==g {
            $g: $value;
        }

        @else {
            $b: $value;
        }
    }

    @return 0.2126 * $r +0.7152 * $g +0.0722 * $b;
}

@function rexbox-contrast-color($background, $light: $white, $dark: $text-primary) {
    $luma: rexbox-relative-luminance($background);

    @if $luma < 0.5 {
        @return $light;
    }

    @return $dark;
}

@function rexbox-subtle-color($base, $weight: 85%) {
    @return color.mix($white, $base, $weight);
}

@function rexbox-emphasis-color($base) {
    @return color.mix($base, $black-soft, 30%);
}

$rexbox-semantic-colors: (
    "primary": $primary,
    "primary-light": $primary-light,
    "primary-dark": $primary-dark,
    "secondary": $secondary,
    "point": $point,
    "success": $success,
    "warning": $warning,
    "danger": $danger,
    "info": $info,
    "positive": $positive,
    "negative": $negative,
    "neutral": $neutral,
);

$rexbox-bg-neutrals: (
    "light": $bg-light,
    "subtle": $bg-subtle,
    "default": $bg-default,
    "dark": $bg-dark,
    "white": $white,
    "black": $black-soft,
    "transparent": transparent,
);

$rexbox-text-base: (
    "primary": $text-primary,
    "secondary": $text-secondary,
    "tertiary": $text-tertiary,
    "muted": color.mix($text-secondary, $text-primary, 40%),
    "disabled": $text-disabled,
    "inverse": $text-inverse,
    "white": $white,
    "black": $black-soft,
    "link": $link,
    "link-hover": $link-hover,
);

$rexbox-text-colors: map.merge($rexbox-text-base, $rexbox-semantic-colors);
$rexbox-bg-colors: map.merge($rexbox-bg-neutrals, $rexbox-semantic-colors);

// --------------------------------------------
// Text Colors
// --------------------------------------------
@each $name, $value in $rexbox-text-colors {
    .text-#{$name} {
        color: $value !important;
    }
}

// alias
.text-body {
    color: $text-primary !important;
}

// --------------------------------------------
// Background Colors
// --------------------------------------------
@each $name, $value in $rexbox-bg-colors {
    .bg-#{$name} {
        background-color: $value !important;

        @if $name !="transparent" {
            color: rexbox-contrast-color($value) !important;
        }
    }
}

@each $name, $value in $rexbox-semantic-colors {
    $subtle: rexbox-subtle-color($value, 88%);

    .bg-#{$name}-subtle {
        background-color: $subtle !important;
        color: rexbox-emphasis-color($value) !important;
    }

    .text-bg-#{$name} {
        display: inline-flex;
        align-items: center;
        gap: 0.25rem;
        font-weight: 500;
        padding: 0.25rem 0.5rem;
        border-radius: 0.375rem;
        background-color: $value !important;
        color: rexbox-contrast-color($value) !important;
    }
}

// 중립 배경용 text-bg
@each $name, $value in $rexbox-bg-neutrals {
    @if $name !="transparent" {
        .text-bg-#{$name} {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            font-weight: 500;
            padding: 0.25rem 0.5rem;
            border-radius: 0.375rem;
            background-color: $value !important;
            color: rexbox-contrast-color($value) !important;
        }
    }
}

// --------------------------------------------
// Helpers
// --------------------------------------------
.bg-gradient-primary {
    background-image: linear-gradient(135deg, $primary, $primary-light) !important;
    color: rexbox-contrast-color($primary) !important;
}

.bg-gradient-secondary {
    background-image: linear-gradient(135deg, $secondary, $info) !important;
    color: rexbox-contrast-color($secondary) !important;
}

.text-reset {
    color: inherit !important;
}

.bg-reset {
    background-color: transparent !important;
}

// ============================================
// Slate Color Palette Utilities
// ============================================
// Slate는 원시 색상으로 모든 단계에 대해 유틸리티 제공
$slate-palette: (
    "50": $slate-50,
    "100": $slate-100,
    "200": $slate-200,
    "300": $slate-300,
    "400": $slate-400,
    "500": $slate-500,
    "600": $slate-600,
    "700": $slate-700,
    "800": $slate-800,
    "900": $slate-900,
    "950": $slate-950,
);

@each $step, $color in $slate-palette {
    .bg-slate-#{$step} {
        background-color: $color !important;
        color: rexbox-contrast-color($color) !important;
    }

    .text-slate-#{$step} {
        color: $color !important;
    }

    .border-slate-#{$step} {
        border-color: $color !important;
    }
}

// ============================================
// Primary Color Palette Utilities
// ============================================
$primary-palette: (
    "100": $primary-100,
    "200": $primary-200,
    "300": $primary-300,
    "400": $primary-400,
    "500": $primary-500,
    "600": $primary-600,
    "700": $primary-700,
    "800": $primary-800,
    "900": $primary-900,
);

@each $step, $color in $primary-palette {
    .bg-primary-#{$step} {
        background-color: $color !important;
        color: rexbox-contrast-color($color) !important;
    }

    .text-primary-#{$step} {
        color: $color !important;
    }

    .border-primary-#{$step} {
        border-color: $color !important;
    }
}

// ============================================
// Secondary Color Palette Utilities
// ============================================
$secondary-palette: (
    "100": $secondary-100,
    "200": $secondary-200,
    "300": $secondary-300,
    "400": $secondary-400,
    "500": $secondary-500,
    "600": $secondary-600,
    "700": $secondary-700,
    "800": $secondary-800,
    "900": $secondary-900,
);

@each $step, $color in $secondary-palette {
    .bg-secondary-#{$step} {
        background-color: $color !important;
        color: rexbox-contrast-color($color) !important;
    }

    .text-secondary-#{$step} {
        color: $color !important;
    }

    .border-secondary-#{$step} {
        border-color: $color !important;
    }
}

// ============================================
// Point Color Palette Utilities
// ============================================
$point-palette: (
    "100": $point-100,
    "200": $point-200,
    "300": $point-300,
    "400": $point-400,
    "500": $point-500,
    "600": $point-600,
    "700": $point-700,
    "800": $point-800,
    "900": $point-900,
);

@each $step, $color in $point-palette {
    .bg-point-#{$step} {
        background-color: $color !important;
        color: rexbox-contrast-color($color) !important;
    }

    .text-point-#{$step} {
        color: $color !important;
    }

    .border-point-#{$step} {
        border-color: $color !important;
    }
}